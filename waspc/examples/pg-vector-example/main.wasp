app pgVectorExample {
  wasp: {
    version: "^0.11.3"
  },
  title: "PG Vector Example",
  dependencies: [
    ("openai", "^4.5.0"),
    ("react-hook-form", "^7.43.1"),
    ("@nextui-org/react", "^2.1.10"),
    ("framer-motion", "^10.16.4"),
    ("pgvector", "0.1.5")
  ],
  client: {
    rootComponent: import { Layout } from "@client/Layout.tsx",
  },
  db: {
    system: PostgreSQL,
    // prisma: {
    //   clientPreviewFeatures: ["postgresqlExtensions"],
    //   dbExtensions: [{
    //     name: "pgvector",
    //     map: "vector"
    //   }]
    // }
  }
}

route RootRoute { path: "/", to: MainPage }
page MainPage {
  component: import { Main } from "@client/MainPage.tsx"
}

action embedDocument {
  fn: import { embedDocument } from "@server/documents.js",
  entities: [Document],
}

query getDocuments {
  fn: import { getDocuments } from "@server/documents.js",
  entities: [Document]
}

action searchDocuments {
  fn: import { searchDocuments } from "@server/documents.js",
  entities: [Document]
}

entity Document {=psl
  id String @id @default(uuid())
  title String
  content String
  embedding Unsupported("vector(1536)")
psl=}