"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[47662],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>h});var a=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=p(n),m=o,h=d["".concat(l,".").concat(m)]||d[m]||c[m]||r;return n?a.createElement(h,i(i({ref:t},u),{},{components:n})):a.createElement(h,i({ref:t},u))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:o,i[1]=s;for(var p=2;p<r;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},38610:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(67294),o=n(44996);const r=e=>a.createElement("div",null,a.createElement("p",{align:"center"},a.createElement("figure",null,a.createElement("img",{style:{width:e.width},alt:e.alt,src:(0,o.Z)(e.source)}),a.createElement("figcaption",{class:"image-caption",style:{fontStyle:"italic",opacity:.6,fontSize:"0.9rem"}},e.caption))))},92908:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(67294),o=n(39960);n(44996);const r=()=>a.createElement("span",{className:"in-blog-cta--divider"}," \u2192 "),i=()=>a.createElement("p",{className:"in-blog-cta-link-container"},a.createElement(o.Z,{className:"in-blog-cta--link",to:"https://e44cy1h4s0q.typeform.com/to/ycUzQa5A"},"We are in Beta (try it out)!"),a.createElement(r,null),a.createElement(o.Z,{className:"in-blog-cta--link",to:"https://discord.gg/rzdnErX"},"Join our community"),a.createElement(r,null),a.createElement(o.Z,{className:"in-blog-cta--link",to:"https://wasp-lang.notion.site/Founding-Engineer-at-Wasp-402274568afa4d7eb7f428f8fa2c0816"},"Work with us"))},19979:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>p,default:()=>g,frontMatter:()=>l,metadata:()=>u,toc:()=>c});var a=n(87462),o=(n(67294),n(3905)),r=(n(39960),n(44996)),i=n(92908),s=n(70589);n(38610);const l={title:"Feature Announcement - New auth method (Google)",authors:["shayneczyzewski"],image:"/img/auth-hero.png",tags:["webdev","wasp","feature","auth"]},p=void 0,u={permalink:"/blog/2022/11/15/auth-feature-announcement",editUrl:"https://github.com/wasp-lang/wasp/edit/release/web/blog/2022-11-15-auth-feature-announcement.md",source:"@site/blog/2022-11-15-auth-feature-announcement.md",title:"Feature Announcement - New auth method (Google)",description:'<img alt="No login for you!"',date:"2022-11-15T00:00:00.000Z",formattedDate:"November 15, 2022",tags:[{label:"webdev",permalink:"/blog/tags/webdev"},{label:"wasp",permalink:"/blog/tags/wasp"},{label:"feature",permalink:"/blog/tags/feature"},{label:"auth",permalink:"/blog/tags/auth"}],readingTime:3.38,hasTruncateMarker:!0,authors:[{name:"Shayne Czyzewski",title:"Founding Engineer @ Wasp",url:"https://github.com/shayneczyzewski",imageURL:"https://github.com/shayneczyzewski.png",key:"shayneczyzewski"}],frontMatter:{title:"Feature Announcement - New auth method (Google)",authors:["shayneczyzewski"],image:"/img/auth-hero.png",tags:["webdev","wasp","feature","auth"]},prevItem:{title:"Feature Announcement - Tailwind CSS support",permalink:"/blog/2022/11/16/tailwind-feature-announcement"},nextItem:{title:"Farnance: How Julian built a SaaS for farmers with Wasp and won a hackathon!",permalink:"/blog/2022/10/28/farnance-hackathon-winner"}},d={authorsImageUrls:[void 0]},c=[{value:"Prologue",id:"prologue",level:2},{value:"Easy auth setup in Wasp",id:"easy-auth-setup-in-wasp",level:2},{value:"Step 1 - Add the appropriate models",id:"step-1---add-the-appropriate-models",level:3},{value:"Step 2 - Update <code>app.auth</code> to use these items",id:"step-2---update-appauth-to-use-these-items",level:3},{value:"Step 3 - Get Google credentials and add environment variables",id:"step-3---get-google-credentials-and-add-environment-variables",level:3},{value:"Step 4 - Make use of the Google login button in your <code>Login</code> page component",id:"step-4---make-use-of-the-google-login-button-in-your-login-page-component",level:3},{value:"Step 5 - Run the app!",id:"step-5---run-the-app",level:3},{value:"Epilogue",id:"epilogue",level:2}],m={toc:c},h="wrapper";function g(e){let{components:t,...n}=e;return(0,o.kt)(h,(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",{align:"center"},(0,o.kt)("img",{alt:"No login for you!",src:(0,r.Z)("img/auth-hero.png"),width:"300px"})),(0,o.kt)(s.ZP,{mdxType:"WaspIntro"}),(0,o.kt)(i.Z,{mdxType:"InBlogCta"}),(0,o.kt)("h2",{id:"prologue"},"Prologue"),(0,o.kt)("p",null,"We've all been there. Your app needs to support user authentication with social login, and you must now decide what to do next. Should you eschew the collective experience and wisdom of the crowd and YOLO it by rolling your own, praying you don't get pwned in prod? \"Nah, I just ate some week-old sushi and can't take another risk that big anytime soon.\", you rightly think."),(0,o.kt)("p",null,'Ok, surely you can just use a library, right? Open source software, baby! "Hmm, seems Library X, Y, and Z are all somewhat used, each with their pros/cons, nuances, and integration pain points. Oh wait, there are tutorials for each... but each says how hard they are to correctly set up and use. I scoped this feature for one day, not a one-week hair-pulling adventure (Dang scrum! Who likes it anyways? Oh yeah, PMs do. Dang PMs!)." Ok, something else. You need to brainstorm. ',(0,o.kt)("inlineCode",{parentName:"p"},"You instead start to surf Twitter and see an ad for some unicorn auth startup.")),(0,o.kt)("p",null,"Eureka, you can go with a third-party SaaS offering! \"We shouldn't have to pay for a while (I ",(0,o.kt)("del",{parentName:"p"},"think?"),' hope!), and it\'s just another dependency, no biggie... #microservices, right?" "But what about outages, data privacy, mapping users between systems, and all that implicit trust you are placing in them?" you think. "What happens when Elon buys them next?" You gasp as if you walked by a Patagonia vest covered in that hot new ',(0,o.kt)("em",{parentName:"p"},"Burnt Hair")," cologne."),(0,o.kt)("p",null,'"All I want is username and password auth with Google login support, why is that so hard in 2022?!? I miss Basic HTTP auth headers. I think I\'ll move off the grid and become a woodworker."'),(0,o.kt)("h2",{id:"easy-auth-setup-in-wasp"},"Easy auth setup in Wasp"),(0,o.kt)("p",null,"Wasp helps that dev by taking care of the entire auth setup process out of the box. Adding support for username and password auth, plus Google login, is super quick and easy for Wasp apps. We think this makes adding auth fast and convenient, with no external dependencies or frustrating manual configuration. Here\u2019s how it works:"),(0,o.kt)("h3",{id:"step-1---add-the-appropriate-models"},"Step 1 - Add the appropriate models"),(0,o.kt)("p",null,"We need to store user info and the external mapping association for social logins. Here is an example you can start from and add new fields to:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql",metastring:'title="./main.wasp"',title:'"./main.wasp"'},"entity User {=psl\n    id                        Int           @id @default(autoincrement())\n    username                  String        @unique\n    password                  String\n    externalAuthAssociations  SocialLogin[]\npsl=}\n\nentity SocialLogin {=psl\n  id          Int       @id @default(autoincrement())\n  provider    String\n  providerId  String\n  user        User      @relation(fields: [userId], references: [id], onDelete: Cascade)\n  userId      Int\n  createdAt   DateTime  @default(now())\n  @@unique([provider, providerId, userId])\npsl=}\n")),(0,o.kt)("h3",{id:"step-2---update-appauth-to-use-these-items"},"Step 2 - Update ",(0,o.kt)("inlineCode",{parentName:"h3"},"app.auth")," to use these items"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-wasp",metastring:'title="./main.wasp"',title:'"./main.wasp"'},'app authExample {\n  // ...\n  auth: {\n    userEntity: User,\n    externalAuthEntity: SocialLogin,\n    methods: {\n      usernameAndPassword: {},\n      google: {}\n    },\n    onAuthFailedRedirectTo: "/login"\n  }\n}\n')),(0,o.kt)("h3",{id:"step-3---get-google-credentials-and-add-environment-variables"},"Step 3 - Get Google credentials and add environment variables"),(0,o.kt)("p",null,"Follow the Google setup guide ",(0,o.kt)("a",{parentName:"p",href:"https://wasp-lang.dev/docs/integrations/google"},"here")," and add the environment variables to your ",(0,o.kt)("inlineCode",{parentName:"p"},".env.server")," file."),(0,o.kt)("h3",{id:"step-4---make-use-of-the-google-login-button-in-your-login-page-component"},"Step 4 - Make use of the Google login button in your ",(0,o.kt)("inlineCode",{parentName:"h3"},"Login")," page component"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="./src/client/auth/Login.js"',title:'"./src/client/auth/Login.js"'},"import React from 'react'\nimport { Link } from 'react-router-dom'\n\nimport { SignInButton as GoogleSignInButton } from '@wasp/auth/helpers/Google'\nimport LoginForm from '@wasp/auth/forms/Login'\n\nconst Login = () => {\n  return (\n    <div>\n      <div>\n        <LoginForm/>\n      </div>\n      <div>\n        I don't have an account yet (<Link to=\"/signup\">go to signup</Link>).\n      </div>\n      <div>\n        <GoogleSignInButton/>\n      </div>\n    </div>\n  )\n}\n\nexport default Login\n")),(0,o.kt)("h3",{id:"step-5---run-the-app"},"Step 5 - Run the app!"),(0,o.kt)("h2",{id:"epilogue"},"Epilogue"),(0,o.kt)("p",null,"No need to move off the grid out of frustration when adding authentication and social login to your web app. ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/shayneczyzewski/authExample"},"Here")," is a complete, minimal example if you want to jump right in, and ",(0,o.kt)("a",{parentName:"p",href:"/docs/auth/overview"},"here")," are the full docs for more info. With just a few simple steps above, we've added authentication with best practices baked into our app so we can move on to solving problems that add value to our users!"))}g.isMDXComponent=!0},70589:(e,t,n)=>{n.d(t,{ZP:()=>s});var a=n(87462),o=(n(67294),n(3905));const r={toc:[]},i="wrapper";function s(e){let{components:t,...n}=e;return(0,o.kt)(i,(0,a.Z)({},r,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"Wasp is a configuration language (DSL) for building full-stack web apps with less code and best practices that works alongside React and Node.js. We are on a mission to streamline web app development while empowering developers to continue using the power of code and their favorite tools. We are backed by Y Combinator and engineers from Airbnb, Facebook, and Lyft.")))}s.isMDXComponent=!0}}]);