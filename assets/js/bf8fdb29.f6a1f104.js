"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[3531],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),c=u(n),m=i,h=c["".concat(s,".").concat(m)]||c[m]||d[m]||r;return n?a.createElement(h,o(o({ref:t},p),{},{components:n})):a.createElement(h,o({ref:t},p))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[c]="string"==typeof e?e:i,o[1]=l;for(var u=2;u<r;u++)o[u]=n[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},85162:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(67294),i=n(86010);const r={tabItem:"tabItem_Ymn6"};function o(e){let{children:t,hidden:n,className:o}=e;return a.createElement("div",{role:"tabpanel",className:(0,i.Z)(r.tabItem,o),hidden:n},t)}},74866:(e,t,n)=>{n.d(t,{Z:()=>w});var a=n(87462),i=n(67294),r=n(86010),o=n(12466),l=n(16550),s=n(91980),u=n(67392),p=n(50012);function c(e){return function(e){return i.Children.map(e,(e=>{if(!e||(0,i.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:i}}=e;return{value:t,label:n,attributes:a,default:i}}))}function d(e){const{values:t,children:n}=e;return(0,i.useMemo)((()=>{const e=t??c(n);return function(e){const t=(0,u.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function m(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function h(e){let{queryString:t=!1,groupId:n}=e;const a=(0,l.k6)(),r=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,s._X)(r),(0,i.useCallback)((e=>{if(!r)return;const t=new URLSearchParams(a.location.search);t.set(r,e),a.replace({...a.location,search:t.toString()})}),[r,a])]}function g(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,r=d(e),[o,l]=(0,i.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!m({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=n.find((e=>e.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:r}))),[s,u]=h({queryString:n,groupId:a}),[c,g]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[a,r]=(0,p.Nk)(n);return[a,(0,i.useCallback)((e=>{n&&r.set(e)}),[n,r])]}({groupId:a}),f=(()=>{const e=s??c;return m({value:e,tabValues:r})?e:null})();(0,i.useLayoutEffect)((()=>{f&&l(f)}),[f]);return{selectedValue:o,selectValue:(0,i.useCallback)((e=>{if(!m({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);l(e),u(e),g(e)}),[u,g,r]),tabValues:r}}var f=n(72389);const k={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function v(e){let{className:t,block:n,selectedValue:l,selectValue:s,tabValues:u}=e;const p=[],{blockElementScrollPositionUntilNextRender:c}=(0,o.o5)(),d=e=>{const t=e.currentTarget,n=p.indexOf(t),a=u[n].value;a!==l&&(c(t),s(a))},m=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const n=p.indexOf(e.currentTarget)+1;t=p[n]??p[0];break}case"ArrowLeft":{const n=p.indexOf(e.currentTarget)-1;t=p[n]??p[p.length-1];break}}t?.focus()};return i.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":n},t)},u.map((e=>{let{value:t,label:n,attributes:o}=e;return i.createElement("li",(0,a.Z)({role:"tab",tabIndex:l===t?0:-1,"aria-selected":l===t,key:t,ref:e=>p.push(e),onKeyDown:m,onClick:d},o,{className:(0,r.Z)("tabs__item",k.tabItem,o?.className,{"tabs__item--active":l===t})}),n??t)})))}function b(e){let{lazy:t,children:n,selectedValue:a}=e;const r=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=r.find((e=>e.props.value===a));return e?(0,i.cloneElement)(e,{className:"margin-top--md"}):null}return i.createElement("div",{className:"margin-top--md"},r.map(((e,t)=>(0,i.cloneElement)(e,{key:t,hidden:e.props.value!==a}))))}function y(e){const t=g(e);return i.createElement("div",{className:(0,r.Z)("tabs-container",k.tabList)},i.createElement(v,(0,a.Z)({},e,t)),i.createElement(b,(0,a.Z)({},e,t)))}function w(e){const t=(0,f.Z)();return i.createElement(y,(0,a.Z)({key:String(t)},e))}},46300:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(67294),i=n(50012);function r(e){let{path:t}=e;const[n]=(0,i.Nk)("docusaurus.tab.js-ts"),r=t.lastIndexOf("{"),o=t.slice(r+1,t.length-1),[l,s]=o.split(","),u=t.slice(0,r);return a.createElement("code",null,u+("js"===n?l:s))}},34277:(e,t,n)=>{n.d(t,{ZP:()=>l});var a=n(87462),i=(n(67294),n(3905));n(46300);const r={toc:[]},o="wrapper";function l(e){let{components:t,...n}=e;return(0,i.kt)(o,(0,a.Z)({},r,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Provider-specific behavior comes down to implementing two functions."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"configFn")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"getUserFieldsFn"))),(0,i.kt)("p",null,"The reference shows how to define both."),(0,i.kt)("p",null,"For behavior common to all providers, check the general ",(0,i.kt)("a",{parentName:"p",href:"/docs/0.11.8/auth/overview#api-reference"},"API Reference"),"."))}l.isMDXComponent=!0},75721:(e,t,n)=>{n.d(t,{ZP:()=>l});var a=n(87462),i=(n(67294),n(3905));n(46300);const r={toc:[]},o="wrapper";function l(e){let{components:t,...n}=e;return(0,i.kt)(o,(0,a.Z)({},r,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"When a user ",(0,i.kt)("strong",{parentName:"p"},"signs in for the first time"),", Wasp creates a new user account and links it to the chosen auth provider account for future logins."),(0,i.kt)("p",null,"Also, if the ",(0,i.kt)("inlineCode",{parentName:"p"},"userEntity")," has:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"A ",(0,i.kt)("inlineCode",{parentName:"li"},"username")," field: Wasp sets it to a random username (e.g. ",(0,i.kt)("inlineCode",{parentName:"li"},"nice-blue-horse-14357"),")."),(0,i.kt)("li",{parentName:"ul"},"A ",(0,i.kt)("inlineCode",{parentName:"li"},"password")," field: Wasp sets it to a random string.")),(0,i.kt)("p",null,"This is a historical coupling between ",(0,i.kt)("inlineCode",{parentName:"p"},"auth")," methods we plan to remove in the future."))}l.isMDXComponent=!0},70006:(e,t,n)=>{n.d(t,{ZP:()=>l});var a=n(87462),i=(n(67294),n(3905));n(46300);const r={toc:[]},o="wrapper";function l(e){let{components:t,...n}=e;return(0,i.kt)(o,(0,a.Z)({},r,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Wasp automatically generates the type ",(0,i.kt)("inlineCode",{parentName:"p"},"GetUserFieldsFn")," to help you correctly type your ",(0,i.kt)("inlineCode",{parentName:"p"},"getUserFields")," function."))}l.isMDXComponent=!0},41116:(e,t,n)=>{n.d(t,{ZP:()=>l});var a=n(87462),i=(n(67294),n(3905));n(46300);const r={toc:[]},o="wrapper";function l(e){let{components:t,...n}=e;return(0,i.kt)(o,(0,a.Z)({},r,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"When a user logs in using a social login provider, the backend receives some data about the user.\nWasp lets you access this data inside the ",(0,i.kt)("inlineCode",{parentName:"p"},"getUserFieldsFn")," function."),(0,i.kt)("p",null,"For example, the User entity can include a ",(0,i.kt)("inlineCode",{parentName:"p"},"displayName")," field which you can set based on the details received from the provider."),(0,i.kt)("p",null,"Wasp also lets you customize the configuration of the providers' settings using the ",(0,i.kt)("inlineCode",{parentName:"p"},"configFn")," function."),(0,i.kt)("p",null,"Let's use this example to show both functions in action:"))}l.isMDXComponent=!0},46713:(e,t,n)=>{n.d(t,{ZP:()=>l});var a=n(87462),i=(n(67294),n(3905));n(46300);const r={toc:[]},o="wrapper";function l(e){let{components:t,...n}=e;return(0,i.kt)(o,(0,a.Z)({},r,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Wasp lets you override the default behavior. You can create custom setups, such as allowing users to define a custom username rather instead of getting a randomly generated one."),(0,i.kt)("p",null,"There are two mechanisms (functions) used for overriding the default behavior:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"getUserFieldsFn")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"configFn"))),(0,i.kt)("p",null,"Let's explore them in more detail."))}l.isMDXComponent=!0},7720:(e,t,n)=>{n.d(t,{ZP:()=>l});var a=n(87462),i=(n(67294),n(3905));n(46300);const r={toc:[]},o="wrapper";function l(e){let{components:t,...n}=e;return(0,i.kt)(o,(0,a.Z)({},r,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Wasp exposes two functions that can help you generate usernames. Import them from ",(0,i.kt)("inlineCode",{parentName:"p"},"@wasp/core/auth.js"),":"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"generateAvailableUsername"),' takes an array of strings and an optional separator and generates a string ending with a random number that is not yet in the database. For example, the above could produce something like "Jim.Smith.3984" for a Github user Jim Smith.'),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"generateAvailableDictionaryUsername")," generates a random dictionary phrase that is not yet in the database. For example, ",(0,i.kt)("inlineCode",{parentName:"li"},"nice-blue-horse-27160"),".")))}l.isMDXComponent=!0},22428:(e,t,n)=>{n.d(t,{ZP:()=>l});var a=n(87462),i=(n(67294),n(3905));n(46300);const r={toc:[]},o="wrapper";function l(e){let{components:t,...n}=e;return(0,i.kt)(o,(0,a.Z)({},r,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"To read more about how to set up the logout button and get access to the logged-in user in both client and server code, read the docs on ",(0,i.kt)("a",{parentName:"p",href:"../../auth/overview"},"using auth"),"."))}l.isMDXComponent=!0},59260:(e,t,n)=>{n.d(t,{ZP:()=>l});var a=n(87462),i=(n(67294),n(3905));n(46300);const r={toc:[]},o="wrapper";function l(e){let{components:t,...n}=e;return(0,i.kt)(o,(0,a.Z)({},r,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Here's a skeleton of how our ",(0,i.kt)("inlineCode",{parentName:"p"},"main.wasp")," should look like after we're done:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-wasp",metastring:'title="main.wasp"',title:'"main.wasp"'},"// Configuring the social authentication\napp myApp {\n  auth: { ... }\n}\n\n// Defining entities\nentity User { ... }\nentity SocialLogin { ... }\n\n// Defining routes and pages\nroute LoginRoute { ... }\npage LoginPage { ... }\n")))}l.isMDXComponent=!0},74688:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>y,contentTitle:()=>v,default:()=>T,frontMatter:()=>k,metadata:()=>b,toc:()=>w});var a=n(87462),i=(n(67294),n(3905)),r=n(46300),o=n(85162),l=n(74866),s=n(44996),u=n(75721),p=n(46713),c=n(41116),d=n(22428),m=n(59260),h=n(7720),g=n(70006),f=n(34277);const k={title:"GitHub"},v=void 0,b={unversionedId:"auth/social-auth/github",id:"version-0.11.8/auth/social-auth/github",title:"GitHub",description:"Wasp supports Github Authentication out of the box.",source:"@site/versioned_docs/version-0.11.8/auth/social-auth/github.md",sourceDirName:"auth/social-auth",slug:"/auth/social-auth/github",permalink:"/docs/0.11.8/auth/social-auth/github",draft:!1,editUrl:"https://github.com/wasp-lang/wasp/edit/release/web/versioned_docs/version-0.11.8/auth/social-auth/github.md",tags:[],version:"0.11.8",frontMatter:{title:"GitHub"},sidebar:"docs",previous:{title:"Overview",permalink:"/docs/0.11.8/auth/social-auth/overview"},next:{title:"Google",permalink:"/docs/0.11.8/auth/social-auth/google"}},y={},w=[{value:"Setting up Github Auth",id:"setting-up-github-auth",level:2},{value:"1. Adding Github Auth to Your Wasp File",id:"1-adding-github-auth-to-your-wasp-file",level:3},{value:"2. Add the Entities",id:"2-add-the-entities",level:3},{value:"3. Creating a GitHub OAuth App",id:"3-creating-a-github-oauth-app",level:3},{value:"4. Adding Environment Variables",id:"4-adding-environment-variables",level:3},{value:"5. Adding the Necessary Routes and Pages",id:"5-adding-the-necessary-routes-and-pages",level:3},{value:"6. Creating the Client Pages",id:"6-creating-the-client-pages",level:3},{value:"Conclusion",id:"conclusion",level:3},{value:"Default Behaviour",id:"default-behaviour",level:2},{value:"Overrides",id:"overrides",level:2},{value:"Using the User&#39;s Provider Account Details",id:"using-the-users-provider-account-details",level:3},{value:"Using Auth",id:"using-auth",level:2},{value:"API Reference",id:"api-reference",level:2}],N={toc:w},x="wrapper";function T(e){let{components:t,...k}=e;return(0,i.kt)(x,(0,a.Z)({},N,k,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Wasp supports Github Authentication out of the box.\nGitHub is a great external auth choice when you're building apps for developers, as most of them already have a GitHub account."),(0,i.kt)("p",null,"Letting your users log in using their GitHub accounts turns the signup process into a breeze."),(0,i.kt)("p",null,"Let's walk through enabling Github Authentication, explain some of the default settings, and show how to override them."),(0,i.kt)("h2",{id:"setting-up-github-auth"},"Setting up Github Auth"),(0,i.kt)("p",null,"Enabling GitHub Authentication comes down to a series of steps:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Enabling GitHub authentication in the Wasp file."),(0,i.kt)("li",{parentName:"ol"},"Adding the necessary Entities."),(0,i.kt)("li",{parentName:"ol"},"Creating a GitHub OAuth app."),(0,i.kt)("li",{parentName:"ol"},"Adding the neccessary Routes and Pages"),(0,i.kt)("li",{parentName:"ol"},"Using Auth UI components in our Pages.")),(0,i.kt)(m.ZP,{mdxType:"WaspFileStructureNote"}),(0,i.kt)("h3",{id:"1-adding-github-auth-to-your-wasp-file"},"1. Adding Github Auth to Your Wasp File"),(0,i.kt)("p",null,"Let's start by properly configuring the Auth object:"),(0,i.kt)(l.Z,{groupId:"js-ts",mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"js",label:"JavaScript",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-wasp",metastring:'title="main.wasp"',title:'"main.wasp"'},'app myApp {\n  wasp: {\n    version: "^0.11.0"\n  },\n  title: "My App",\n  auth: {\n    // highlight-next-line\n    // 1. Specify the User entity  (we\'ll define it next)\n    // highlight-next-line\n    userEntity: User,\n    // highlight-next-line\n    // 2. Specify the SocialLogin entity (we\'ll define it next)\n    // highlight-next-line\n    externalAuthEntity: SocialLogin,\n    methods: {\n      // highlight-next-line\n      // 3. Enable Github Auth\n      // highlight-next-line\n      gitHub: {}\n    },\n    onAuthFailedRedirectTo: "/login"\n  },\n}\n'))),(0,i.kt)(o.Z,{value:"ts",label:"TypeScript",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-wasp",metastring:'title="main.wasp"',title:'"main.wasp"'},'app myApp {\n  wasp: {\n    version: "^0.11.0"\n  },\n  title: "My App",\n  auth: {\n    // highlight-next-line\n    // 1. Specify the User entity  (we\'ll define it next)\n    // highlight-next-line\n    userEntity: User,\n    // highlight-next-line\n    // 2. Specify the SocialLogin entity (we\'ll define it next)\n    // highlight-next-line\n    externalAuthEntity: SocialLogin,\n    methods: {\n      // highlight-next-line\n      // 3. Enable Github Auth\n      // highlight-next-line\n      gitHub: {}\n    },\n    onAuthFailedRedirectTo: "/login"\n  },\n}\n')))),(0,i.kt)("h3",{id:"2-add-the-entities"},"2. Add the Entities"),(0,i.kt)("p",null,"Let's now define the entities acting as ",(0,i.kt)("inlineCode",{parentName:"p"},"app.auth.userEntity")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"app.auth.externalAuthEntity"),":"),(0,i.kt)(l.Z,{groupId:"js-ts",mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"js",label:"JavaScript",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-wasp",metastring:'title="main.wasp"',title:'"main.wasp"'},"// ...\n// highlight-next-line\n// 4. Define the User entity\n// highlight-next-line\nentity User {=psl\n    id          Int     @id @default(autoincrement())\n    // ...\n    externalAuthAssociations  SocialLogin[]\npsl=}\n\n// highlight-next-line\n// 5. Define the SocialLogin entity\n// highlight-next-line\nentity SocialLogin {=psl\n  id          Int       @id @default(autoincrement())\n  provider    String\n  providerId  String\n  user        User      @relation(fields: [userId], references: [id], onDelete: Cascade)\n  userId      Int\n  createdAt   DateTime  @default(now())\n  @@unique([provider, providerId, userId])\npsl=}\n"))),(0,i.kt)(o.Z,{value:"ts",label:"TypeScript",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-wasp",metastring:'title="main.wasp"',title:'"main.wasp"'},"// ...\n// highlight-next-line\n// 4. Define the User entity\n// highlight-next-line\nentity User {=psl\n    id          Int     @id @default(autoincrement())\n    // ...\n    externalAuthAssociations  SocialLogin[]\npsl=}\n\n// highlight-next-line\n// 5. Define the SocialLogin entity\n// highlight-next-line\nentity SocialLogin {=psl\n  id          Int       @id @default(autoincrement())\n  provider    String\n  providerId  String\n  user        User      @relation(fields: [userId], references: [id], onDelete: Cascade)\n  userId      Int\n  createdAt   DateTime  @default(now())\n  @@unique([provider, providerId, userId])\npsl=}\n")))),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"externalAuthEntity")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"userEntity")," are explained in ",(0,i.kt)("a",{parentName:"p",href:"../../auth/social-auth/overview#social-login-entity"},"the social auth overview"),"."),(0,i.kt)("h3",{id:"3-creating-a-github-oauth-app"},"3. Creating a GitHub OAuth App"),(0,i.kt)("p",null,"To use GitHub as an authentication method, you'll first need to create a GitHub OAuth App and provide Wasp with your client key and secret. Here's how you do it:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Log into your GitHub account and navigate to: ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/settings/developers"},"https://github.com/settings/developers"),"."),(0,i.kt)("li",{parentName:"ol"},"Select ",(0,i.kt)("strong",{parentName:"li"},"New OAuth App"),"."),(0,i.kt)("li",{parentName:"ol"},"Supply required information.")),(0,i.kt)("img",{alt:"GitHub Applications Screenshot",src:(0,s.Z)("img/integrations-github-1.png"),width:"400px"}),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"For ",(0,i.kt)("strong",{parentName:"li"},"Authorization callback URL"),":",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"For development, put: ",(0,i.kt)("inlineCode",{parentName:"li"},"http://localhost:3000/auth/login/github"),"."),(0,i.kt)("li",{parentName:"ul"},"Once you know on which URL your app will be deployed, you can create a new app with that URL instead e.g. ",(0,i.kt)("inlineCode",{parentName:"li"},"https://someotherhost.com/auth/login/github"),".")))),(0,i.kt)("ol",{start:4},(0,i.kt)("li",{parentName:"ol"},"Hit ",(0,i.kt)("strong",{parentName:"li"},"Register application"),"."),(0,i.kt)("li",{parentName:"ol"},"Hit ",(0,i.kt)("strong",{parentName:"li"},"Generate a new client secret")," on the next page."),(0,i.kt)("li",{parentName:"ol"},"Copy your Client ID and Client secret as you'll need them in the next step.")),(0,i.kt)("h3",{id:"4-adding-environment-variables"},"4. Adding Environment Variables"),(0,i.kt)("p",null,"Add these environment variables to the ",(0,i.kt)("inlineCode",{parentName:"p"},".env.server")," file at the root of your project (take their values from the previous step):"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title=".env.server"',title:'".env.server"'},"GITHUB_CLIENT_ID=your-github-client-id\nGITHUB_CLIENT_SECRET=your-github-client-secret\n")),(0,i.kt)("h3",{id:"5-adding-the-necessary-routes-and-pages"},"5. Adding the Necessary Routes and Pages"),(0,i.kt)("p",null,"Let's define the necessary authentication Routes and Pages."),(0,i.kt)("p",null,"Add the following code to your ",(0,i.kt)("inlineCode",{parentName:"p"},"main.wasp")," file:"),(0,i.kt)(l.Z,{groupId:"js-ts",mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"js",label:"JavaScript",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-wasp",metastring:'title="main.wasp"',title:'"main.wasp"'},'// ...\n\n// 6. Define the routes\nroute LoginRoute { path: "/login", to: LoginPage }\npage LoginPage {\n  component: import { Login } from "@client/pages/auth.jsx"\n}\n'))),(0,i.kt)(o.Z,{value:"ts",label:"TypeScript",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-wasp",metastring:'title="main.wasp"',title:'"main.wasp"'},'// ...\n\n// 6. Define the routes\nroute LoginRoute { path: "/login", to: LoginPage }\npage LoginPage {\n  component: import { Login } from "@client/pages/auth.tsx"\n}\n')))),(0,i.kt)("p",null,"We'll define the React components for these pages in the ",(0,i.kt)(r.Z,{path:"client/pages/auth.{jsx,tsx}",mdxType:"FileExtSwitcher"})," file below."),(0,i.kt)("h3",{id:"6-creating-the-client-pages"},"6. Creating the Client Pages"),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"We are using ",(0,i.kt)("a",{parentName:"p",href:"https://tailwindcss.com/"},"Tailwind CSS")," to style the pages. Read more about how to add it ",(0,i.kt)("a",{parentName:"p",href:"../../project/css-frameworks"},"here"),".")),(0,i.kt)("p",null,"Let's create a ",(0,i.kt)(r.Z,{path:"auth.{jsx,tsx}",mdxType:"FileExtSwitcher"})," file in the ",(0,i.kt)("inlineCode",{parentName:"p"},"client/pages")," folder and add the following to it:"),(0,i.kt)(l.Z,{groupId:"js-ts",mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"js",label:"JavaScript",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="client/pages/auth.jsx"',title:'"client/pages/auth.jsx"'},'import { LoginForm } from \'@wasp/auth/forms/Login\'\n\nexport function Login() {\n  return (\n    <Layout>\n      <LoginForm />\n    </Layout>\n  )\n}\n\n// A layout component to center the content\nexport function Layout({ children }) {\n  return (\n    <div className="w-full h-full bg-white">\n      <div className="min-w-full min-h-[75vh] flex items-center justify-center">\n        <div className="w-full h-full max-w-sm p-5 bg-white">\n          <div>{children}</div>\n        </div>\n      </div>\n    </div>\n  )\n}\n'))),(0,i.kt)(o.Z,{value:"ts",label:"TypeScript",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="client/pages/auth.tsx"',title:'"client/pages/auth.tsx"'},'import { LoginForm } from \'@wasp/auth/forms/Login\'\n\nexport function Login() {\n  return (\n    <Layout>\n      <LoginForm />\n    </Layout>\n  )\n}\n\n// A layout component to center the content\nexport function Layout({ children }: { children: React.ReactNode }) {\n  return (\n    <div className="w-full h-full bg-white">\n      <div className="min-w-full min-h-[75vh] flex items-center justify-center">\n        <div className="w-full h-full max-w-sm p-5 bg-white">\n          <div>{children}</div>\n        </div>\n      </div>\n    </div>\n  )\n}\n')))),(0,i.kt)("p",null,"We imported the generated Auth UI component and used them in our pages. Read more about the Auth UI components ",(0,i.kt)("a",{parentName:"p",href:"../../auth/ui"},"here"),"."),(0,i.kt)("h3",{id:"conclusion"},"Conclusion"),(0,i.kt)("p",null,"Yay, we've successfully set up Github Auth! \ud83c\udf89"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Github Auth",src:n(4085).Z,width:"1315",height:"800"})),(0,i.kt)("p",null,"Running ",(0,i.kt)("inlineCode",{parentName:"p"},"wasp db migrate-dev")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"wasp start")," should now give you a working app with authentication.\nTo see how to protect specific pages (i.e., hide them from non-authenticated users), read the docs on ",(0,i.kt)("a",{parentName:"p",href:"../../auth/overview"},"using auth"),"."),(0,i.kt)("h2",{id:"default-behaviour"},"Default Behaviour"),(0,i.kt)("p",null,"Add ",(0,i.kt)("inlineCode",{parentName:"p"},"gitHub: {}")," to the ",(0,i.kt)("inlineCode",{parentName:"p"},"auth.methods")," dictionary to use it with default settings."),(0,i.kt)(l.Z,{groupId:"js-ts",mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"js",label:"JavaScript",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-wasp",metastring:"title=main.wasp {10}",title:"main.wasp","{10}":!0},'app myApp {\n  wasp: {\n    version: "^0.11.0"\n  },\n  title: "My App",\n  auth: {\n    userEntity: User,\n    externalAuthEntity: SocialLogin,\n    methods: {\n      gitHub: {}\n    },\n    onAuthFailedRedirectTo: "/login"\n  },\n}\n'))),(0,i.kt)(o.Z,{value:"ts",label:"TypeScript",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-wasp",metastring:"title=main.wasp {10}",title:"main.wasp","{10}":!0},'app myApp {\n  wasp: {\n    version: "^0.11.0"\n  },\n  title: "My App",\n  auth: {\n    userEntity: User,\n    externalAuthEntity: SocialLogin,\n    methods: {\n      gitHub: {}\n    },\n    onAuthFailedRedirectTo: "/login"\n  },\n}\n')))),(0,i.kt)(u.ZP,{mdxType:"DefaultBehaviour"}),(0,i.kt)("h2",{id:"overrides"},"Overrides"),(0,i.kt)(p.ZP,{mdxType:"OverrideIntro"}),(0,i.kt)("h3",{id:"using-the-users-provider-account-details"},"Using the User's Provider Account Details"),(0,i.kt)(c.ZP,{mdxType:"OverrideExampleIntro"}),(0,i.kt)(l.Z,{groupId:"js-ts",mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"js",label:"JavaScript",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-wasp",metastring:'title="main.wasp" {11-12,22}',title:'"main.wasp"',"{11-12,22}":!0},'app myApp {\n  wasp: {\n    version: "^0.11.0"\n  },\n  title: "My App",\n  auth: {\n    userEntity: User,\n    externalAuthEntity: SocialLogin,\n    methods: {\n      gitHub: {\n        configFn: import { getConfig } from "@server/auth/github.js",\n        getUserFieldsFn: import { getUserFields } from "@server/auth/github.js"\n      }\n    },\n    onAuthFailedRedirectTo: "/login"\n  },\n}\n\nentity User {=psl\n    id                        Int     @id @default(autoincrement())\n    username                  String  @unique\n    displayName               String\n    externalAuthAssociations  SocialLogin[]\npsl=}\n\n// ...\n')),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:"title=src/server/auth/github.js",title:"src/server/auth/github.js"},'import { generateAvailableDictionaryUsername } from "@wasp/core/auth.js";\n\nexport const getUserFields = async (_context, args) => {\n  const username = await generateAvailableDictionaryUsername();\n  const displayName = args.profile.displayName;\n  return { username, displayName };\n};\n\nexport function getConfig() {\n  return {\n    clientID // look up from env or elsewhere\n    clientSecret // look up from env or elsewhere\n    scope: [],\n  };\n}\n'))),(0,i.kt)(o.Z,{value:"ts",label:"TypeScript",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-wasp",metastring:'title="main.wasp" {11-12,22}',title:'"main.wasp"',"{11-12,22}":!0},'app myApp {\n  wasp: {\n    version: "^0.11.0"\n  },\n  title: "My App",\n  auth: {\n    userEntity: User,\n    externalAuthEntity: SocialLogin,\n    methods: {\n      gitHub: {\n        configFn: import { getConfig } from "@server/auth/github.js",\n        getUserFieldsFn: import { getUserFields } from "@server/auth/github.js"\n      }\n    },\n    onAuthFailedRedirectTo: "/login"\n  },\n}\n\nentity User {=psl\n    id                        Int     @id @default(autoincrement())\n    username                  String  @unique\n    displayName               String\n    externalAuthAssociations  SocialLogin[]\npsl=}\n\n// ...\n')),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title=src/server/auth/github.ts",title:"src/server/auth/github.ts"},"import type { GetUserFieldsFn } from '@wasp/types'\nimport { generateAvailableDictionaryUsername } from '@wasp/core/auth.js'\n\nexport const getUserFields: GetUserFieldsFn = async (_context, args) => {\n  const username = await generateAvailableDictionaryUsername()\n  const displayName = args.profile.displayName\n  return { username, displayName }\n}\n\nexport function getConfig() {\n  return {\n    clientID, // look up from env or elsewhere\n    clientSecret, // look up from env or elsewhere\n    scope: [],\n  }\n}\n")),(0,i.kt)(g.ZP,{mdxType:"GetUserFieldsType"}))),(0,i.kt)("h2",{id:"using-auth"},"Using Auth"),(0,i.kt)(d.ZP,{mdxType:"UsingAuthNote"}),(0,i.kt)("h2",{id:"api-reference"},"API Reference"),(0,i.kt)(f.ZP,{mdxType:"ApiReferenceIntro"}),(0,i.kt)(l.Z,{groupId:"js-ts",mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"js",label:"JavaScript",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-wasp",metastring:'title="main.wasp" {11-12}',title:'"main.wasp"',"{11-12}":!0},'app myApp {\n  wasp: {\n    version: "^0.11.0"\n  },\n  title: "My App",\n  auth: {\n    userEntity: User,\n    externalAuthEntity: SocialLogin,\n    methods: {\n      gitHub: {\n        configFn: import { getConfig } from "@server/auth/github.js",\n        getUserFieldsFn: import { getUserFields } from "@server/auth/github.js"\n      }\n    },\n    onAuthFailedRedirectTo: "/login"\n  },\n}\n'))),(0,i.kt)(o.Z,{value:"ts",label:"TypeScript",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-wasp",metastring:'title="main.wasp" {11-12}',title:'"main.wasp"',"{11-12}":!0},'app myApp {\n  wasp: {\n    version: "^0.11.0"\n  },\n  title: "My App",\n  auth: {\n    userEntity: User,\n    externalAuthEntity: SocialLogin,\n    methods: {\n      gitHub: {\n        configFn: import { getConfig } from "@server/auth/github.js",\n        getUserFieldsFn: import { getUserFields } from "@server/auth/github.js"\n      }\n    },\n    onAuthFailedRedirectTo: "/login"\n  },\n}\n')))),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"gitHub")," dict has the following properties:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("h4",{parentName:"li",id:"configfn-serverimport"},(0,i.kt)("inlineCode",{parentName:"h4"},"configFn: ServerImport")),(0,i.kt)("p",{parentName:"li"},"This function should return an object with the Client ID, Client Secret, and scope for the OAuth provider."),(0,i.kt)(l.Z,{groupId:"js-ts",mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"js",label:"JavaScript",mdxType:"TabItem"},(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:"title=src/server/auth/github.js",title:"src/server/auth/github.js"},"export function getConfig() {\n  return {\n    clientID, // look up from env or elsewhere\n    clientSecret, // look up from env or elsewhere\n    scope: [],\n  }\n}\n"))),(0,i.kt)(o.Z,{value:"ts",label:"TypeScript",mdxType:"TabItem"},(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title=src/server/auth/github.ts",title:"src/server/auth/github.ts"},"export function getConfig() {\n  return {\n    clientID, // look up from env or elsewhere\n    clientSecret, // look up from env or elsewhere\n    scope: [],\n  }\n}\n"))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("h4",{parentName:"li",id:"getuserfieldsfn-serverimport"},(0,i.kt)("inlineCode",{parentName:"h4"},"getUserFieldsFn: ServerImport")),(0,i.kt)("p",{parentName:"li"},"This function should return the user fields to use when creating a new user."),(0,i.kt)("p",{parentName:"li"},"The ",(0,i.kt)("inlineCode",{parentName:"p"},"context")," contains the ",(0,i.kt)("inlineCode",{parentName:"p"},"User")," entity, and the ",(0,i.kt)("inlineCode",{parentName:"p"},"args")," object contains GitHub profile information.\nYou can do whatever you want with this information (e.g., generate a username)."),(0,i.kt)("p",{parentName:"li"},"Here is how you could generate a username based on the Github display name:"),(0,i.kt)(l.Z,{groupId:"js-ts",mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"js",label:"JavaScript",mdxType:"TabItem"},(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:"title=src/server/auth/github.js",title:"src/server/auth/github.js"},"import { generateAvailableUsername } from '@wasp/core/auth.js'\n\nexport const getUserFields = async (_context, args) => {\n  const username = await generateAvailableUsername(\n    args.profile.displayName.split(' '),\n    { separator: '.' }\n  )\n  return { username }\n}\n"))),(0,i.kt)(o.Z,{value:"ts",label:"TypeScript",mdxType:"TabItem"},(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title=src/server/auth/github.ts",title:"src/server/auth/github.ts"},"import type { GetUserFieldsFn } from '@wasp/types'\nimport { generateAvailableUsername } from '@wasp/core/auth.js'\n\nexport const getUserFields: GetUserFieldsFn = async (_context, args) => {\n  const username = await generateAvailableUsername(\n    args.profile.displayName.split(' '),\n    { separator: '.' }\n  )\n  return { username }\n}\n")))),(0,i.kt)(h.ZP,{mdxType:"UsernameGenerateExplanation"}))))}T.isMDXComponent=!0},4085:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/github-e4d12d3e83fdbfbf93ce1fa831645c0e.png"}}]);